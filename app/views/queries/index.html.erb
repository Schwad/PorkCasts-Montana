<div class = "row" >
<h1>Queries</h1>
</div>

<div class = "row">
  <div class = "col-md-12">
    <table class="table table-striped table-bordered">
      <thead>
        <th>#</th>
        <th>Payee</th>
        <th>List all Payments</th>
        <th>Date Queried</th>
        <th>Total Paid</th>
        <th>Total Number of Checks</th>
        <th>Average Payment</th>
        <th>Largest Payment</th>
        <th>Remove</th>
      </thead>
      <tbody>
        <% i = 1 %>
        <% @queries.each do |query| %>
          <tr>
            <td><%= i %></td>
            <td><%= link_to query.content, user_query_path(@user.id, query.id) %></td>
            <td><%= link_to "Show Payments", user_query_path(@user.id, query.id) %></td>
            <td><%= query.created_at.strftime("%m/%d/%Y") %></td>
            <td><%= "$" + query.payment_sum.round(2).to_s %></td>
            <td><%= query.checks.count %></td>
            <td><% if query.checks.count == 0 && query.credit_cards.count == 0 %>
              <%= 0 %>
              <% else %>
              <%= "$" + (query.payment_sum / (query.checks.count + query.credit_cards.count)).round(2).to_s %>
              <% end %></td>
            <td><%= "$" + query.largest_payment.round(2).to_s %></td>
            <td><%= link_to "delete query", user_query_path(@user.id, query.id), :method => :delete %></td>
            <% i += 1 %>
          <% end %>
        </tr>
      </tbody>

    </table>
  </div>

</div>