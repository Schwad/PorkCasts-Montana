<%= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>
<div class = "row" >
<h1>Payments to <%= @query.content %></h1>
</div>
<br><br>
<div class = "row">
  <div class = "col-md-4">
    <div id="curve_chart" style="height: 300px; border: 3px solid black; border-radius: 4px;   box-shadow: 5px 5px 5px -3px rgba(0,0,0,0.63); overflow:auto;">
      <h3 style="text-align: center;">Payment by Category</h3>
    <%= pie_chart @query.checks.group(:payment_category).count, height: "230px" %>

    </div>
  </div>
  <div class = "col-md-8" style="height: 460px; border: 3px solid black; border-radius: 4px;   box-shadow: 5px 5px 5px -3px rgba(0,0,0,0.63); overflow:auto;">
    <table class="table table-striped table-bordered">
      <thead>
        <th>#</th>
        <th>Payment to:</th>
        <th>Amount</th>
        <th>Date Paid</th>
        <th>Department</th>
        <th>Payment Category</th>
        <th>Check or Card</th>
      </thead>
      <tbody>
        <% i = 1 %>
        <% @query.checks.each do |check| %>
          <tr class="pork-row">
            <td><%= i %></td>
            <td><%= @query.content %></td>
            <td><%= check.amount %></td>
            <td><%= check.payment_date.to_date.strftime("%m/%d/%Y") %></td>
            <td><%= check.department %></td>
            <td><%= check.payment_category %></td>
            <td>Check</td>
            <% i += 1 %>
          </tr>
        <% end %>

        <% @query.credit_cards.each do |card| %>
          <tr class="pork-row">
            <td><%= i %></td>
            <td><%= @query.content %> </td>
            <td><%= card.amount %></td>
            <td><%= card.billing_date %></td>
            <td><%= card.department %></td>
            <td>N/A</td>
            <td>Credit Card</td>
            <% i += 1 %>
          <% end %>
        </tr>
      </tbody>
    </table>
  </div>
</div>


